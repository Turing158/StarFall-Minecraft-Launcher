<Page x:Class="StarFallMC.SettingPages.GameSetting"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:StarFallMC.SettingPages"
      xmlns:starFallMc="clr-namespace:StarFallMC"
      mc:Ignorable="d"
      Title="GameSetting" Height="380" Width="600"
      Unloaded="GameSetting_OnUnloaded">
    <Page.Resources>
        <ResourceDictionary Source="../Style/GameSettingStyle.xaml"></ResourceDictionary>
    </Page.Resources>
    <Grid>
        <Border Background="#f1f1f1" CornerRadius="10" Width="580" HorizontalAlignment="Left"></Border>
        <StackPanel Orientation="Horizontal">
            <ScrollViewer Name="ScrollViewer"
                          HorizontalScrollBarVisibility="Hidden" 
                          VerticalScrollBarVisibility="Auto" 
                          Margin="10 5"
                          HorizontalAlignment="Right"
                          CanContentScroll="False">
                <StackPanel>
                    <Border Height="120" Style="{StaticResource RectByMargin}">
                        <Grid>
                            <TextBlock Text="选择Java版本:" Style="{StaticResource RectTitle}"></TextBlock>
                            <ComboBox Name="JavaList" 
                                      HorizontalAlignment="Center" 
                                      VerticalAlignment="Center" 
                                      Width="480"
                                      Margin="20 8 20 15" 
                                      ItemsSource="{Binding JavaVersions}"
                                      SelectedIndex="{Binding CurrentJavaVersionIndex}"
                                      MaxDropDownHeight="180"
                                      ToolTip="选择Java版本"
                                      DropDownOpened="JavaList_OnDropDownOpened"
                                      DropDownClosed="JavaList_OnDropDownClosed">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Width="{Binding ElementName=JavaList,Path=ActualWidth}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"></ColumnDefinition>
                                                <ColumnDefinition Width="40"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <Grid>
                                                <TextBlock FontSize="15" Text="{Binding Name}" Foreground="#001D1F" Margin="15 0 0 0"/>
                                                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding Version}" Foreground="#264446" Margin="0 0 10 0"/>
                                            </Grid>
                                            <Border Grid.Column="1"></Border>
                                        </Grid>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0 12" Orientation="Horizontal">
                                <TextBlock Name="Auto"
                                           Margin="40 0" 
                                           Style="{StaticResource TextButton}" 
                                           MouseLeftButtonDown="Auto_OnMouseLeftButtonDown"
                                           ToolTip="自动导入Java版本">
                                    <Run FontFamily="{StaticResource IconFontFamily}" Text="&#xe8d0;"></Run>
                                    <Run Text="自动导入"></Run>
                                </TextBlock>
                                <TextBlock Name="AddJavaList" 
                                           Margin="20 0" 
                                           Style="{StaticResource TextButton}" 
                                           MouseLeftButtonDown="AddJavaList_OnMouseLeftButtonDown"
                                           ToolTip="手动选择添加Java版本">
                                    <Run FontFamily="{StaticResource IconFontFamily}" Text="&#xe901;"></Run>
                                    <Run Text="手动添加"></Run>
                                </TextBlock>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <Border Height="100" Style="{StaticResource RectByMargin}">
                        <Grid>
                            <TextBlock Text="游戏内存:" Style="{StaticResource RectTitle}"></TextBlock>
                            <ToggleButton Name="MemoryMode" 
                                          HorizontalAlignment="Right" 
                                          VerticalAlignment="Top" 
                                          Margin="50 10" 
                                          Width="80" Height="30" 
                                          Style="{StaticResource TbStyle}" Click="MemoryMode_OnClick"
                                           IsChecked="{Binding AutoMemoryDisable}">
                                <ToggleButton.Content>
                                    <Grid>
                                        <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Left" Text="自动"></TextBlock>
                                        <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Right" Text="手动"></TextBlock>
                                    </Grid>
                                </ToggleButton.Content>
                            </ToggleButton>
                            <Grid VerticalAlignment="Center" 
                                  Margin="30 20 30 0" >
                                <Slider Name="MemorySlider" 
                                        AutoToolTipPlacement="TopLeft"
                                        ValueChanged="Memory_OnValueChanged"
                                        PreviewMouseLeftButtonDown="Memory_OnPreviewMouseLeftButtonDown"
                                        Value="{Binding MemoryValue}"
                                        IsEnabled="{Binding AutoMemoryDisable}">
                                </Slider>
                            </Grid>
                            
                            <Grid VerticalAlignment="Center" Margin="30 60 30 0">
                                <TextBlock Name="MinMemory" Text="0MB" FontSize="15" FontFamily="Inter"></TextBlock>
                                <TextBlock Name="MaxMemory" HorizontalAlignment="Right" Text="0MB" FontSize="15" FontFamily="Inter"></TextBlock>
                                <TextBlock Name="CurrentMemory" HorizontalAlignment="Center" Text="0MB" FontSize="15" FontFamily="Inter"></TextBlock>
                            </Grid>
                        </Grid>
                    </Border>
                    
                    
                    <Grid Height="120">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="250"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Border Style="{StaticResource RectByMargin}" Margin="20 10 10 10">
                            <Grid>
                                <TextBlock Text="版本隔离:" Style="{StaticResource RectTitle}"></TextBlock>
                                <ToggleButton Name="IsIsolation" 
                                              HorizontalAlignment="Right" 
                                              VerticalAlignment="Top" 
                                              Margin="10 10" 
                                              Width="80" Height="30" 
                                              Style="{StaticResource TbStyle}"
                                              MouseDown="IsIsolation_OnMouseDown"
                                              IsChecked="{Binding IsIsolation}">
                                    <ToggleButton.Content>
                                        <Grid>
                                            <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Left" Text="关闭"></TextBlock>
                                            <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Right" Text="开启"></TextBlock>
                                        </Grid>
                                    </ToggleButton.Content>
                                </ToggleButton>
                                <TextBlock Width="250" Height="40" FontFamily="黑体" Foreground="#113032" FontSize="13" VerticalAlignment="Bottom" Text="版本隔离：若开启版本隔离，则每个版本的资源文件都储存在版本核心文件夹内" TextWrapping="WrapWithOverflow" Margin="0 5"></TextBlock>
                            </Grid>
                        </Border>
                        <Border Grid.Column="1" Style="{StaticResource RectByMargin}" Margin="10 10 20 10">
                            <Grid>
                                <TextBlock Text="游戏窗口:" Style="{StaticResource RectTitle}"></TextBlock>
                                <Grid Width="150" Height="30" 
                                      HorizontalAlignment="Center" 
                                      VerticalAlignment="Bottom" 
                                      Margin="15" ToolTip="输入窗口大小：宽x高">
                                    <TextBox Name="GameWidth" 
                                             Width="60" Height="30" 
                                             HorizontalAlignment="Left" 
                                             Style="{StaticResource WindowTextBox}"
                                             Text="{Binding GameWidth}"
                                             LostFocus="GameWidth_OnLostFocus"
                                             PreviewTextInput="GameWidth_OnPreviewTextInput"></TextBox>
                                    <TextBlock Text="x" HorizontalAlignment="Center" Margin="10" VerticalAlignment="Center"></TextBlock>
                                    <TextBox Name="GameHeight" 
                                             Width="60" Height="30" 
                                             HorizontalAlignment="Right" 
                                             Style="{StaticResource WindowTextBox}"
                                             Text="{Binding GameHeight}"
                                             LostFocus="GameHeight_OnLostFocus"></TextBox>
                                </Grid>
                                <ToggleButton Name="IsFullScreen" 
                                              HorizontalAlignment="Right" 
                                              VerticalAlignment="Top" 
                                              Margin="10 10" 
                                              Width="80" Height="30" 
                                              Style="{StaticResource TbStyle}"
                                              Click="IsFullScreen_OnClick"
                                              ToolTip="全屏or窗口化"
                                              IsChecked="{Binding IsFullScreen}">
                                    <ToggleButton.Content>
                                        <Grid>
                                            <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Left" Text="窗口"></TextBlock>
                                            <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Right" Text="全屏"></TextBlock>
                                        </Grid>
                                    </ToggleButton.Content>
                                </ToggleButton>
                            </Grid>
                        </Border>
                    </Grid>
                    
                    
                    <Border Height="120" Style="{StaticResource RectByMargin}">
                        <StackPanel>
                            <TextBlock Text="其他信息:" Style="{StaticResource RectTitle}"></TextBlock>
                            <DockPanel Height="30">
                                <TextBlock Text="窗口标题" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <TextBox Style="{StaticResource CustomInfoTextBox}" Text="{Binding WindowTitle}" ToolTip="这里的文字会显示到游戏窗口上"></TextBox>
                            </DockPanel>
                            <DockPanel Height="30">
                                <TextBlock Text="自定义信息" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <TextBox Style="{StaticResource CustomInfoTextBox}" Text="{Binding CustomInfo}" ToolTip="这里的文字会显示到游戏F3的信息中"></TextBox>
                            </DockPanel>
                        </StackPanel>
                    </Border>
                    
                    
                    <Border Style="{StaticResource RectByMargin}">
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="其他参数:" Style="{StaticResource RectTitle}"></TextBlock>
                            <Grid Height="120" Margin="0 5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <StackPanel Width="120">
                                    <TextBlock Text="JVM参数" Style="{StaticResource CustomInfoTitle}" VerticalAlignment="Top" Margin="10 5"></TextBlock>
                                    <ToggleButton Name="JvmExtraAreaEnable" 
                                                  HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center" 
                                                  Width="80" Height="30" 
                                                  Style="{StaticResource TbStyle}"
                                                  Click="JvmExtraAreaEnable_OnClick"
                                                  IsChecked="{Binding JvmExtraAreaEnable}">
                                        <ToggleButton.Content>
                                            <Grid>
                                                <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Left" Text="关闭"></TextBlock>
                                                <TextBlock Style="{StaticResource ToggleButtonText}" HorizontalAlignment="Right" Text="启用"></TextBlock>
                                            </Grid>
                                        </ToggleButton.Content>
                                    </ToggleButton>
                                </StackPanel>
                                <TextBox Name="JvmExtraArea"
                                         Grid.Column="1" 
                                         Style="{StaticResource TextArea}" 
                                         Height="120" 
                                         Margin="0 0 20 0" 
                                         IsEnabled="{Binding JvmExtraAreaEnable}"></TextBox>
                            </Grid>
                            <Grid Margin="0 5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBlock Width="90" Text="游戏尾部参数" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <TextBox Name="GameTail" Grid.Column="1" 
                                         Style="{StaticResource TextArea}" 
                                         HorizontalScrollBarVisibility="Auto" 
                                         VerticalScrollBarVisibility="Disabled"
                                         VerticalContentAlignment="Center"
                                         TextWrapping="NoWrap"
                                         AcceptsReturn="False"
                                         Height="30" 
                                         Text="{Binding GameTailArgs}"
                                         Margin="0 0 20 0" ></TextBox>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
            <Border Width="10"></Border>
        </StackPanel>
    </Grid>
</Page>
