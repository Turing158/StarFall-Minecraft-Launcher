<Page x:Class="StarFallMC.SettingPages.GameSetting"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:StarFallMC.SettingPages"
      xmlns:comp="clr-namespace:StarFallMC.Component"
      mc:Ignorable="d"
      Title="GameSetting" Height="380" Width="600"
      Unloaded="GameSetting_OnUnloaded">
    <Page.Resources>
        <ResourceDictionary Source="Style/GameSettingStyle.xaml"></ResourceDictionary>
    </Page.Resources>
    <Grid>
        <Border Background="#f1f1f1" CornerRadius="10" Width="580" HorizontalAlignment="Left"></Border>
        <StackPanel Orientation="Horizontal">
            <ScrollViewer Name="ScrollViewer"
                          HorizontalScrollBarVisibility="Disabled" 
                          VerticalScrollBarVisibility="Auto" 
                          Margin="10 5"
                          HorizontalAlignment="Right"
                          CanContentScroll="False">
                <StackPanel>
                    <Border Style="{StaticResource RectByMargin}">
                        <StackPanel>
                            <TextBlock Text="选择Java版本:" Style="{StaticResource RectTitle}" Margin="10 10 0 5"></TextBlock>
                            <comp:ComboBox x:Name="JavaList" 
                                          HorizontalAlignment="Center" 
                                          VerticalAlignment="Center" 
                                          Width="480"
                                          Margin="20 0" 
                                          ItemsSource="{Binding JavaVersions}"
                                          SelectedIndex="{Binding CurrentJavaVersionIndex}"
                                          ForbiddenDeleteFirstLengthChoice="1"
                                          DefaultIndex="0"
                                          ToolTip="选择Java版本">
                                <comp:ComboBox.CurrentChoiceTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock Text="{Binding Name}" FontSize="15" 
                                                       Foreground="{DynamicResource SecondaryBrush_1}"
                                                       HorizontalAlignment="Left" VerticalAlignment="Center"
                                                       Margin="20 0"></TextBlock>
                                            <TextBlock Text="{Binding Version}" FontSize="14"
                                                       Foreground="{DynamicResource SecondaryBrush}"
                                                       HorizontalAlignment="Right" VerticalAlignment="Center"
                                                       Margin="0 0"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </comp:ComboBox.CurrentChoiceTemplate>
                                <comp:ComboBox.ChoiceTemplate>
                                    <DataTemplate>
                                        <Grid ToolTip="{Binding Path}">
                                            <TextBlock Text="{Binding Name}" FontSize="14" 
                                                       Foreground="{DynamicResource SecondaryBrush_1}"
                                                       HorizontalAlignment="Left" VerticalAlignment="Center"
                                                       Margin="20 0 100 0" Padding="0 10"></TextBlock>
                                            <Border Margin="100 0" Height="10"></Border>
                                            <TextBlock Text="{Binding Version}" FontSize="12"
                                                       Foreground="{DynamicResource SecondaryBrush}"
                                                       HorizontalAlignment="Right" VerticalAlignment="Center"
                                                       Margin="35 0 0 10"></TextBlock>
                                            <TextBlock Text="{Binding Path}" FontSize="11"
                                                       Foreground="{DynamicResource PrimaryBrush_4}"
                                                       HorizontalAlignment="Right" VerticalAlignment="Center"
                                                       TextWrapping="NoWrap"
                                                       TextTrimming="CharacterEllipsis"
                                                       MaxWidth="300"
                                                       Margin="0 15 0 0"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </comp:ComboBox.ChoiceTemplate>
                            </comp:ComboBox>
                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0 10" Orientation="Horizontal">
                                <comp:TextButton Content="&#xe8d0; 自动导入" 
                                                 Margin="40 0" 
                                                 ToolTip="自动导入Java版本 tip：自动导入Java版本后，会自动清除Java列表" 
                                                 Click="Auto_OnClick"></comp:TextButton>
                                <comp:TextButton Content="&#xe901; 手动添加"
                                                 Margin="20 0" 
                                                 ToolTip="手动选择添加Java版本"
                                                 Click="AddJavaList_OnClick"></comp:TextButton>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <Border Height="100" Style="{StaticResource RectByMargin}">
                        <Grid>
                            <TextBlock Text="游戏内存:" Style="{StaticResource RectTitle}"></TextBlock>
                            <comp:ToggleButton x:Name="MemoryMode" 
                                          HorizontalAlignment="Right" 
                                          VerticalAlignment="Top" 
                                          Margin="50 10" 
                                          Click="MemoryMode_OnClick"
                                          IsChecked="{Binding AutoMemoryDisable}">
                                <comp:ToggleButton.LeftContent>
                                    <TextBlock Text="自动" FontSize="13"></TextBlock>
                                </comp:ToggleButton.LeftContent>
                                <comp:ToggleButton.RightContent>
                                    <TextBlock Text="手动" FontSize="13"></TextBlock>
                                </comp:ToggleButton.RightContent>
                            </comp:ToggleButton>
                            <comp:Slider x:Name="MemorySlider" 
                                         Margin="40 20 40 0"
                                         VerticalAlignment="Center" 
                                         AutoToolTipPlacement="TopLeft"
                                         ValueChanged="Memory_OnValueChanged"
                                         ValueFontSize="15"
                                         Value="{Binding MemoryValue}"
                                         IsEnabled="{Binding AutoMemoryDisable}">
                            </comp:Slider>
                        </Grid>
                    </Border>
                    
                    
                    <Grid Height="120">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="250"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Border Style="{StaticResource RectByMargin}" Margin="20 10 10 10">
                            <Grid>
                                <TextBlock Text="版本隔离:" Style="{StaticResource RectTitle}"></TextBlock>
                                <comp:ToggleButton HorizontalAlignment="Right" 
                                                   VerticalAlignment="Top" 
                                                   Margin="10 10" 
                                                   IsChecked="{Binding IsIsolation}">
                                    <comp:ToggleButton.LeftContent>
                                        <TextBlock Text="关闭" FontSize="13"></TextBlock>
                                    </comp:ToggleButton.LeftContent>
                                    <comp:ToggleButton.RightContent>
                                        <TextBlock Text="开启" FontSize="13"></TextBlock>
                                    </comp:ToggleButton.RightContent>
                                </comp:ToggleButton>
                                <TextBlock Width="260" FontSize="14" VerticalAlignment="Bottom" Text="版本隔离：若开启版本隔离，则每个版本的资源文件都储存在版本核心文件夹内" TextWrapping="WrapWithOverflow" Margin="0 0 0 5"></TextBlock>
                            </Grid>
                        </Border>
                        <Border Grid.Column="1" Style="{StaticResource RectByMargin}" Margin="10 10 20 10">
                            <Grid>
                                <TextBlock Text="游戏窗口:" Style="{StaticResource RectTitle}"></TextBlock>
                                <Grid Width="150" Height="30" 
                                      HorizontalAlignment="Center" 
                                      VerticalAlignment="Bottom" 
                                      Margin="15" ToolTip="输入窗口大小：宽x高">
                                    <comp:TextInput x:Name="GameWidth" 
                                                  Width="60" Height="30" 
                                                  HorizontalAlignment="Left" 
                                                  Style="{StaticResource WindowTextBox}"
                                                  Text="{Binding GameWidth}"
                                                  LostFocus="GameWidth_OnLostFocus"
                                                  PreviewTextInput="GameWidth_OnPreviewTextInput"></comp:TextInput>
                                    <TextBlock Text="x" HorizontalAlignment="Center" Margin="10" VerticalAlignment="Center"></TextBlock>
                                    <comp:TextInput x:Name="GameHeight" 
                                                    Width="60" Height="30" 
                                                    HorizontalAlignment="Right" 
                                                    Style="{StaticResource WindowTextBox}"
                                                    Text="{Binding GameHeight}"
                                                    LostFocus="GameHeight_OnLostFocus"></comp:TextInput>
                                </Grid>
                                <comp:ToggleButton x:Name="IsFullScreen" 
                                              HorizontalAlignment="Right" 
                                              VerticalAlignment="Top" 
                                              Margin="10 10" 
                                              Click="IsFullScreen_OnClick"
                                              ToolTip="全屏or窗口化"
                                              IsChecked="{Binding IsFullScreen}">
                                    <comp:ToggleButton.LeftContent>
                                        <TextBlock Text="窗口" FontSize="13"></TextBlock>
                                    </comp:ToggleButton.LeftContent>
                                    <comp:ToggleButton.RightContent>
                                        <TextBlock Text="全屏" FontSize="13"></TextBlock>
                                    </comp:ToggleButton.RightContent>
                                </comp:ToggleButton>
                            </Grid>
                        </Border>
                    </Grid>
                    
                    
                    <Border Height="120" Style="{StaticResource RectByMargin}">
                        <StackPanel>
                            <TextBlock Text="其他信息:" Style="{StaticResource RectTitle}"></TextBlock>
                            <DockPanel Height="30">
                                <TextBlock Text="窗口标题" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <comp:TextInput Style="{StaticResource CustomInfoTextBox}" Text="{Binding WindowTitle}" ToolTip="这里的文字会显示到游戏窗口上"></comp:TextInput>
                            </DockPanel>
                            <DockPanel Height="30">
                                <TextBlock Text="自定义信息" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <comp:TextInput Style="{StaticResource CustomInfoTextBox}" Text="{Binding CustomInfo}" ToolTip="这里的文字会显示到游戏F3的信息中"></comp:TextInput>
                            </DockPanel>
                        </StackPanel>
                    </Border>
                    
                    
                    <Border Style="{StaticResource RectByMargin}">
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="其他参数:" Style="{StaticResource RectTitle}"></TextBlock>
                            <Grid Height="120" Margin="0 5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <StackPanel Width="120">
                                    <TextBlock Text="JVM参数" Style="{StaticResource CustomInfoTitle}" VerticalAlignment="Top" Margin="10 5"></TextBlock>
                                    <comp:ToggleButton x:Name="JvmExtraAreaEnable" 
                                                  HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center" 
                                                  Click="JvmExtraAreaEnable_OnClick"
                                                  IsChecked="{Binding JvmExtraAreaEnable}">
                                        <comp:ToggleButton.LeftContent>
                                            <TextBlock Text="关闭" FontSize="13"></TextBlock>
                                        </comp:ToggleButton.LeftContent>
                                        <comp:ToggleButton.RightContent>
                                            <TextBlock Text="启用" FontSize="13"></TextBlock>
                                        </comp:ToggleButton.RightContent>
                                    </comp:ToggleButton>
                                </StackPanel>
                                <comp:TextInput x:Name="JvmExtraArea"
                                         Grid.Column="1" 
                                         InputType="TextArea"
                                         Height="120" 
                                         Margin="0 0 20 0" 
                                         IsEnabled="{Binding JvmExtraAreaEnable}"></comp:TextInput>
                            </Grid>
                            <Grid Margin="0 5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBlock Width="90" Text="游戏尾部参数" Style="{StaticResource CustomInfoTitle}"></TextBlock>
                                <comp:TextInput x:Name="GameTail" Grid.Column="1" 
                                         VerticalContentAlignment="Center"
                                         Height="30" 
                                         Text="{Binding GameTailArgs}"
                                         Margin="0 0 20 0" ></comp:TextInput>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
            <Border Width="10"></Border>
        </StackPanel>
    </Grid>
</Page>
