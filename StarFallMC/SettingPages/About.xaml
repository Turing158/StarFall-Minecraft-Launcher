<Page x:Class="StarFallMC.SettingPages.About"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:StarFallMC.SettingPages"
      xmlns:component="clr-namespace:StarFallMC.Component"
      xmlns:util="clr-namespace:StarFallMC.Util"
      mc:Ignorable="d"
      Title="About" Height="380" Width="600">
    <Page.Resources>
        <util:BooleanTrueToVisibilityVisibleConverter x:Key="BooleanTrueToVisibilityVisibleConverter"/>
        <util:BooleanFalseToVisibilityVisibleConverter x:Key="BooleanFalseToVisibilityVisibleConverter"/>
        <Style x:Key="PublicThanksItem" TargetType="ListViewItem" BasedOn="{StaticResource {x:Type ListViewItem}}">
            <Setter Property="Margin" Value="5"></Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <Border CornerRadius="5" 
                                Background="{DynamicResource PrimaryBrush_4}" 
                                Height="50">
                            <Grid>
                                <Image Width="35" Height="35" 
                                        Source="{Binding Avatar}"
                                        HorizontalAlignment="Left" 
                                        Margin="7.5"></Image>
                                <StackPanel Height="40" HorizontalAlignment="Left"  Margin="50 2  0 2">
                                    <TextBlock Text="{Binding Name}" 
                                               Foreground="{DynamicResource PrimaryBrush}"
                                               FontSize="14"></TextBlock>
                                    <TextBlock Text="{Binding Role}"
                                               Margin="0 3 0 0" 
                                               Foreground="{DynamicResource PrimaryBrush}"></TextBlock>
                                </StackPanel>
                                <component:Button Height="30" Width="30" 
                                                  HorizontalAlignment="Right" 
                                                  VerticalAlignment="Bottom"
                                                  Margin="5" 
                                                  Content="&#xea17;"
                                                  FontFamily="{StaticResource IconFontFamily}"
                                                  Tag="{Binding Link}"
                                                  Click="ButtonBase_OnClick"></component:Button>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>
    <Grid>
        <Border Background="#f1f1f1" CornerRadius="10" Width="580" HorizontalAlignment="Left"></Border>
        <ScrollViewer Margin="0 5 10 5"
                      HorizontalScrollBarVisibility="Hidden"
                      VerticalScrollBarVisibility="Auto"
                      CanContentScroll="False">
            <StackPanel>
                <Border Style="{StaticResource RectByMargin}">
                    <StackPanel>
                        <TextBlock Text="关于" Style="{StaticResource RectTitle}"></TextBlock>
                        <Grid Height="40" Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"></ColumnDefinition>
                                <ColumnDefinition Width="100"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Border Background="{DynamicResource PrimaryBrush_4}" 
                                    CornerRadius="5">
                                <Grid>
                                    <Image Width="25" Height="25" 
                                           HorizontalAlignment="Left" 
                                           Margin="7.5" 
                                           Source="../assets/ico.ico"></Image>
                                    <StackPanel Height="40" HorizontalAlignment="Left"  Margin="50 2  0 2">
                                        <TextBlock Text="StarFallMC" 
                                                   Foreground="{DynamicResource PrimaryBrush}"
                                                   FontSize="13"></TextBlock>
                                        <TextBlock Text="一个Minecraft启动器"
                                                   FontSize="11"
                                                   Margin="0 2 0 0" 
                                                   Foreground="{DynamicResource PrimaryBrush}"></TextBlock>
                                    </StackPanel>
                                    <Border HorizontalAlignment="Right"
                                            VerticalAlignment="Top" 
                                            CornerRadius="5"
                                            Margin="5"
                                            Background="{DynamicResource PrimaryBrush}">
                                        <TextBlock Text="{Binding CurrentVersion}" 
                                                   Foreground="{DynamicResource PrimaryBrush_4}"
                                                   FontSize="11"
                                                   Margin="5 2" 
                                                   HorizontalAlignment="Center"></TextBlock>
                                    </Border>
                                </Grid>
                            </Border>
                            <Border Grid.Column="1" 
                                    Name="UpdateBtn"
                                    Margin="10 0 0 0" 
                                    Background="{DynamicResource PrimaryBrush_4}"
                                    CornerRadius="5"
                                    MouseLeftButtonDown="Update_OnMouseLeftButtonDown"
                                    MouseLeftButtonUp="Update_OnMouseLeftButtonUp"
                                    MouseLeave="Update_OnMouseLeave"
                                    RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <ScaleTransform></ScaleTransform>
                                </Border.RenderTransform>
                                <Grid>
                                    <StackPanel ToolTip="点击检查更新"  VerticalAlignment="Center"
                                                Visibility="{Binding NeedUpdate, Converter={StaticResource BooleanFalseToVisibilityVisibleConverter}}">
                                        <TextBlock HorizontalAlignment="Center"
                                                   Foreground="{DynamicResource PrimaryBrush}"
                                                   FontSize="13"
                                                   Text="暂无更新"></TextBlock>
                                        <TextBlock HorizontalAlignment="Center"
                                                   Text="点击检查更新" 
                                                   FontSize="10"
                                                   Margin="0 1 0 0" 
                                                   Foreground="{DynamicResource PrimaryBrush}"></TextBlock>
                                    </StackPanel>
                                    <Grid Visibility="{Binding NeedUpdate, Converter={StaticResource BooleanTrueToVisibilityVisibleConverter}}">
                                        <Border Margin="5"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Top" 
                                                Background="{DynamicResource PrimaryBrush}"
                                                CornerRadius="20">
                                            <TextBlock Text="&#xe604;" 
                                                       Padding="2"
                                                       FontFamily="{StaticResource IconFontFamily}"
                                                       Foreground="{DynamicResource PrimaryBrush_4}"></TextBlock>
                                        </Border>
                                        <Border HorizontalAlignment="Right"
                                                VerticalAlignment="Top" 
                                                CornerRadius="5"
                                                Margin="5"
                                                Background="{DynamicResource PrimaryBrush}">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <TextBlock Text="v"
                                                           Foreground="{DynamicResource PrimaryBrush_4}"
                                                           FontSize="10"
                                                           Margin="3 0 0 0" ></TextBlock>
                                                <TextBlock Name="UpdateVersionName" 
                                                           Text="{Binding LastUpdateInfo.Version}" 
                                                           Foreground="{DynamicResource PrimaryBrush_4}"
                                                           FontSize="10"
                                                           Margin="0 0 3 0" ></TextBlock>
                                            </StackPanel>
                                        </Border>
                                        <TextBlock Text="点击更新" 
                                                   FontSize="11"
                                                   Margin="0 0 0 1"
                                                   Foreground="{DynamicResource PrimaryBrush}" 
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Bottom"></TextBlock>
                                    </Grid>
                                    <Border Name="UpdateLoading" 
                                            Background="{DynamicResource PrimaryBrush_4}"
                                            CornerRadius="5">
                                        <StackPanel  HorizontalAlignment="Center" 
                                                     VerticalAlignment="Center">
                                            <TextBlock Text="&#xe679;" 
                                                       FontFamily="{StaticResource IconFontFamily}"
                                                       FontSize="13"
                                                       HorizontalAlignment="Center"
                                                       RenderTransformOrigin="0.5,0.5"
                                                       Foreground="{DynamicResource PrimaryBrush}">
                                                <TextBlock.RenderTransform>
                                                    <RotateTransform Angle="0"></RotateTransform>
                                                </TextBlock.RenderTransform>
                                                <TextBlock.Triggers>
                                                    <EventTrigger RoutedEvent="Loaded">
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                                                                 To="360"
                                                                                 Duration="0:0:1"
                                                                                 RepeatBehavior="Forever"></DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </EventTrigger>
                                                </TextBlock.Triggers>
                                            </TextBlock>
                                            <TextBlock Text="检测更新中..." Foreground="{DynamicResource PrimaryBrush}"></TextBlock>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Border>
                        </Grid>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource RectByMargin}">
                    <StackPanel>
                        <TextBlock Text="鸣谢" Style="{StaticResource RectTitle}"></TextBlock>
                        <ListView ItemContainerStyle="{StaticResource PublicThanksItem}"
                                  ItemsSource="{Binding PublicThanksItems}"
                                  Margin="0 10 0 0">
                            
                        </ListView>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
